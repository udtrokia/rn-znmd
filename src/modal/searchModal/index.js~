
import React,{Component} from 'react'
import {
    Modal,
    View,
    Text,
    Image,
    TouchableOpacity,
    DeviceEventEmitter
}from 'react-native'

import {hradio,wradio} from '../../radio'

export default class SearchModal extends Component{
    constructor(props){
	super(props)
	this.state={
	    modalVisible:false,
	    distanceTap:true,
	}
    }
    componentWillMount(){
	DeviceEventEmitter.addListener('searchModal',(visible)=>{
	    this.setState({modalVisible:visible})
	})
    }
    componentDidMount(){

    }
    distanceBtn=()=>{
	if(this.state.distanceTap){
	    return(
		    <TouchableOpacity
		style={{
		    justifyContent:'center',alignItems:'center',borderWidth:wradio*1,
		    borderColor:'#d6d6d6',
		    height:hradio*80,width:wradio*290,backgroundColor:'#fff',
		}}
		onPress={()=>{
		    this.setState({distanceTap:true})
		}}
		    >
		    <Image
		source={require('./static/distance.png')}
		style={{height:hradio*24,width:wradio*97}}
		    />
		    </TouchableOpacity>
	    )}else{
		return(
			<TouchableOpacity
		    style={{
			justifyContent:'center',alignItems:'center',borderWidth:wradio*1,
			borderColor:'#d6d6d6',
			height:hradio*80,width:wradio*290,backgroundColor:'#eee',
		    }}
		    onPress={()=>{
			this.setState({distanceTap:true})
		    }}
			>
			<Image
		    source={require('./static/distance.png')}
		    style={{height:hradio*24,width:wradio*97}}
			/>
			</TouchableOpacity>
		)
	    }

    }
    priceBtn=()=>{
	if(this.state.distanceTap){
	    return(
		    <TouchableOpacity
		style={{
		    justifyContent:'center',alignItems:'center',borderWidth:wradio*1,
		    borderColor:'#d6d6d6',
		    height:hradio*80,width:wradio*290,backgroundColor:'#eee',	
		}}
		onPress={()=>{this.setState({distanceTap:false})}}
		    >
		    <Image
		source={require('./static/price.png')}
		style={{height:hradio*24,width:wradio*97}}
		    />
		    </TouchableOpacity>

	    )}else{
		return(
			<TouchableOpacity
		    style={{
			justifyContent:'center',alignItems:'center',borderWidth:wradio*1,
			borderColor:'#d6d6d6',
			height:hradio*80,width:wradio*290,backgroundColor:'#fff',	
		    }}
		    onPress={()=>{this.setState({distanceTap:false})}}		
			>
			<Image
		    source={require('./static/price.png')}
		    style={{height:hradio*24,width:wradio*97}}
			/>
			</TouchableOpacity>
		)
		

	    }
    }
    renderSort=()=>{
	if(this.state.distanceTap){
	    return(
		    <View
		style={{alignItems:'center'}}
		    >	
		    <TouchableOpacity
		style={{borderBottomWidth:0.5,borderColor:'#b6b6b6'}}
		onPress={()=>{this.props.navigate('ShopBase')}}		
		    >	    
		    <Image
		source={require('./static/shop1.png')}
		style={{height:hradio*193,width:wradio*578}}
		    >
		    <TouchableOpacity
		style={{
		    alignSelf:'flex-end',marginRight:wradio*35,
		    marginTop:hradio*45
		}}
		    >
		    <Image
		source={require('./static/location.png')}
		style={{
		    height:hradio*50,width:wradio*40
		}}
		    />
		    </TouchableOpacity>
		    </Image>
		    </TouchableOpacity>
		    
		    <TouchableOpacity
		style={{borderBottomWidth:0.5,borderColor:'#b6b6b6'}}
		onPress={()=>{this.props.navigate('ShopBase')}}		
		    >
		    <Image
		source={require('./static/shop2.png')}
		style={{height:hradio*193,width:wradio*578}}
		    >
		    <TouchableOpacity
		style={{
		    alignSelf:'flex-end',marginRight:wradio*35,
		    marginTop:hradio*45
		}}
		    >
		    <Image
		source={require('./static/location.png')}
		style={{
		    height:hradio*50,width:wradio*40
		}}
		    />
		    </TouchableOpacity>
		    </Image>
		    </TouchableOpacity>
		    </View>		
	    )
	}else{
	    return(

		    <View
		style={{alignItems:'center'}}
		    >	
		    <TouchableOpacity
		onPress={()=>{this.props.navigate('ShopBase')}}		
		style={{borderBottomWidth:0.5,borderColor:'#b6b6b6'}}
		    >	    
		    <Image
		source={require('./static/shop2.png')}
		style={{height:hradio*193,width:wradio*578}}
		    >
		    <TouchableOpacity
		style={{
		    alignSelf:'flex-end',marginRight:wradio*35,
		    marginTop:hradio*45
		}}
		    >
		    <Image
		source={require('./static/location.png')}
		style={{
		    height:hradio*50,width:wradio*40
		}}
		    />
		    </TouchableOpacity>
		    </Image>
		    </TouchableOpacity>
		    
		    <TouchableOpacity
		style={{borderBottomWidth:0.5,borderColor:'#b6b6b6'}}
		onPress={()=>{this.props.navigate('ShopBase')}}
		    >
		    <Image
		source={require('./static/shop1.png')}
		style={{height:hradio*193,width:wradio*578}}
		    >
		    <TouchableOpacity
		
		style={{
		    alignSelf:'flex-end',marginRight:wradio*35,
		    marginTop:hradio*45
		}}
		    >
		    <Image
		source={require('./static/location.png')}
		style={{
		    height:hradio*50,width:wradio*40
		}}
		    />
		    </TouchableOpacity>
		    </Image>
		    </TouchableOpacity>
		    </View>				    
	    )
	}
    }
    render(){
	return(
		<Modal
	    style={{flex:1}}
	    visible={this.state.modalVisible}
	    transparent={true}
	    onRequestClose={() => {alert("Modal has been closed.")}}
		>
		<Image
	    source={require('./static/bg.png')}
	    style={{height:hradio*1280,width:wradio*720}}
		>
		<Image
	    source={require('./static/modal.png')}
	    style={{
		marginTop:hradio*90,alignSelf:'center',
		height:hradio*864,width:wradio*580}}
		>
		<TouchableOpacity
	    style={{alignSelf:'flex-end',marginRight:wradio*35,marginTop:hradio*30}}
	    onPress={()=>{DeviceEventEmitter.emit('searchModal',false)}
		>
		<Image
	    source={require('./static/close.png')}
	    style={{width:wradio*22,height:hradio*23}}
		/>
		</TouchableOpacity>		
		<View
	    style={{
		flexDirection:'row',
		marginTop:hradio*185,justifyContent:'center'
	    }}
		>
		{this.distanceBtn()}
	    {this.priceBtn()}
	    </View>	    
		{this.renderSort()}
	    </Image>	 
		<TouchableOpacity
	    style={{
		alignItems:'center',marginTop:10*hradio,height:hradio*178		
	    }}
		>		
		<Image
	    source={require('./static/foot.png')}
	    style={{width:wradio*622,height:hradio*186}}
		/>
		</TouchableOpacity>
		</Image>	
		</Modal>
	)
    }
}
